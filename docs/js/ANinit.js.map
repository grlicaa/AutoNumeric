{"version":3,"names":[],"mappings":"","sources":["ANinit.js"],"sourcesContent":["/**\r\n * ANinit.js v1.2.0 | THE RIGHT THING SOLUTIONS d.o.o. | Andrej Grlica | andrej.grlica@right-thing.solutions.si \r\n * User with Oracle APEX plug-in to render data\r\n * Â© 2020 Andrej Grlica\r\n * Dependencies : autonumeric.js@4.6.0\r\n * Released under the MIT License.\r\n */\r\nfunction ANIGinit(itemId, opt, isRplace) {\r\n  var index = 0;\r\n  const $item = $('#'+itemId).addClass('u-vh is-focusable js-ignoreChange');\r\n\r\n\tfunction ANgetNumStr(pVal) {\r\n\t\tvar x = document.createElement(\"input\");\r\n\t\t\tx.setAttribute(\"type\", \"hidden\");\r\n\t\t\r\n\t\tvar anElement  = new AutoNumeric(x, (isRplace?((\"\"+pVal).replace(\",\",\".\")):pVal), opt );\r\n\t\tvar lreturn = anElement.getFormatted();\t\r\n\t\tvar lclasses = $(x).attr(\"class\");\r\n\r\n\t\treturn {val:lreturn, class:lclasses};\r\n\t}\r\n\r\n\tfunction ANIGsetAliment() {\r\n\t\tvar $elm = $(\"div[id^='\"+itemId+\"_'].ig-div-autonumeric:first\").parent();\r\n\t\tif ($elm.hasClass(\"u-tE\")) {\r\n\t\t\t$item.css(\"text-align\",\"right\");\r\n\t\t}\r\n\t\telse if ($elm.hasClass(\"u-tC\")) {\r\n\t\t\t$item.css(\"text-align\",\"center\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction render(value) {\r\n\t\tvar showVal = ANgetNumStr(value);\r\n\t\tconst out = apex.util.htmlBuilder();\r\n\t\tout.markup('<div')\r\n\t\t\t.attr('class', 'ig-div-autonumeric '+(showVal.class?\"ig-autonumeric-custom \"+showVal.class:\"\"))\r\n\t\t\t.attr('id', itemId+'_'+index+'_0')\r\n\t\t\t.markup('>')\r\n\t\t\t.content(showVal.val)\r\n\t\t\t.markup('</div>');\r\n\r\n\t\tindex += 1;\r\n\t\t\r\n\t\treturn out.toString();\r\n\t}\r\n\r\n \t $( document ).ready(function() {\r\n\t\t//add aliment\r\n\t\tANIGsetAliment();\r\n\t});  \r\n\r\n\r\n\tapex.item.create(itemId, {\r\n\t\tsetValue:function(pValue, pDisplayValue) {\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (pValue)\r\n\t\t\t\t\tel.set((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue));\r\n\t\t\t\telse\r\n\t\t\t\t\tel.set(\"\");\r\n\r\n\t\t\t\tif (pValue == \"\" && el.settings.styleRules) {\r\n\t\t\t\t\tif (el.settings.styleRules.ranges) {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules.ranges).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\tif (val == \"class\")\r\n\t\t\t\t\t\t\t\t$item.removeClass(el.settings.styleRules.ranges[val]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\t$item.removeClass(el.settings.styleRules[val]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tel.reformat();\t\t  \r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$item.val((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue) );\r\n\t\t\t\tnew AutoNumeric(\"#\"+this.id, opt );\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue:function() {\r\n\t\t\tvar lVal = \"\";\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (el.get() && el.get() != \"\") {\r\n\t\t\t\t\tvar result = el.getNumber();\r\n\t\t\t\t\tlVal = (isRplace?((\"\"+result).replace(\".\",\",\")):\"\"+result);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn lVal;\t\t\r\n\t\t},\r\n\t\tdisable:function() {\r\n\t\t\t$item.closest('.ig-div-autonumeric').removeClass('ig-div-autonumeric-enabled');\r\n\t\t\t$item.closest('.ig-div-autonumeric').addClass('ig-div-autonumeric-disabled');\r\n\t\t\t$item.attr('readonly','readonly');\r\n\t\t\t$item.addClass('apex_disabled');\r\n\t\t},\r\n\t\tisDisabled: function() {\r\n\t\t\treturn $item.closest('.ig-div-autonumeric').hasClass('ig-div-autonumeric-disabled');\r\n\t\t},\t\r\n\t\tenable:function() {\r\n\t\t\t$item.closest('.ig-div-autonumeric').removeClass('ig-div-autonumeric-disabled');\r\n\t\t\t$item.closest('.ig-div-autonumeric').addClass('ig-div-autonumeric-enabled');\r\n\t\t\t$item.removeAttr('readonly');\r\n\t\t\t$item.removeClass('apex_disabled');\r\n\t\t},\r\n\t\tdisplayValueFor:function(value) {\r\n\t\t\treturn render(value);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction ANForminit(itemId, opt, isRplace, pClass) {\r\n\r\n\tvar $item = apex.jQuery(\"#\"+itemId);\r\n\r\n\tnew AutoNumeric(\"#\"+itemId, opt);\r\n\t\r\n\tapex.widget.initPageItem(itemId, {\r\n\t\tsetValue:function(pValue, pDisplayValue) {\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (pValue)\r\n\t\t\t\t\tel.set((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue));\r\n\t\t\t\telse\r\n\t\t\t\t\tel.set(\"\");\r\n\t\r\n\t\t\t\tif (pValue == \"\" && el.settings.styleRules) {\r\n\t\t\t\t\tif (el.settings.styleRules.ranges) {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules.ranges).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\tif (val == \"class\")\r\n\t\t\t\t\t\t\t$item.removeClass(el.settings.styleRules.ranges[val]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\t$item.removeClass(el.settings.styleRules[val]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tel.reformat();\t\t  \r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$item.val((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue) );\r\n\t\t\t\tnew AutoNumeric(\"#\"+this.id, opt );\t\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisChanged:function() {\r\n\t\t\treturn (this.node.defaultValue != (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id) ? AutoNumeric.getNumber(\"#\"+this.id) : this.getValue()));\r\n\t\t},\r\n\t\tgetValue:function() {\r\n\t\t\tvar lVal = \"\";\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (el.get() && el.get() != \"\") {\r\n\t\t\t\t\t var result = el.getNumber();\r\n\t\t\t\t\t lVal = (isRplace?((\"\"+result).replace(\".\",\",\")):\"\"+result);\r\n\t\t\t\t }\r\n\t\t\t}\t\r\n\t\t\treturn lVal;\r\n\t\t}\r\n\t  });\r\n\r\n\tif (pClass){\r\n\t\t$item.addClass(pClass);\r\n\t}\t  \r\n\r\n\t$item.focusin(function(hnd) {\r\n\t\t$(this).parents(\":eq(2)\").addClass(\"is-active\");\r\n\t});\t \r\n\r\n\t$item.focusout(function() {\r\n\t\t$(this).parents(\":eq(2)\").removeClass(\"is-active\");\r\n\t});\t\r\n}"],"file":"ANinit.js"}