{"version":3,"names":[],"mappings":"","sources":["ANinit.js"],"sourcesContent":["/**\r\n * ANinit.js v1.0.2 | THE RIGHT THING SOLUTIONS d.o.o. | Andrej Grlica | andrej.grlica@right-thing.solutions.si \r\n * User with Oracle APEX plug-in to render data\r\n * Â© 2020 Andrej Grlica\r\n * Dependencies : autonumeric.js@4.6.0\r\n * Released under the MIT License.\r\n */\r\nfunction ANgetNumStr(pVal, pOpt, isRplace) {\r\n\tvar x = document.createElement(\"input\");\r\n\t    x.setAttribute(\"type\", \"hidden\");\r\n\t\r\n\tvar anElement  = new AutoNumeric(x, (isRplace?((\"\"+pVal).replace(\",\",\".\")):pVal), pOpt );\r\n\tvar lreturn = anElement.getFormatted();\t\r\n\tvar lclasses = $(x).attr(\"class\");\r\n\r\n\r\n\treturn {val:lreturn, class:lclasses};\r\n}\r\n\r\nfunction ANIGsetAliment(itemId) {\r\n\tvar $elm = $(\"div.ig-div-autonumeric:has(input[id^='\"+itemId+\"_']):first\").parent();\r\n\tif ($elm.hasClass(\"u-tE\")) {\r\n\t\t$(\"#\"+itemId).css(\"text-align\",\"right\");\r\n\t}\r\n\telse if ($elm.hasClass(\"u-tC\")) {\r\n\t\t$(\"#\"+itemId).css(\"text-align\",\"center\");\r\n\t}\r\n}\r\n\r\nfunction ANIGinit(itemId, opt, isRplace) {\r\n  var index = 0;\r\n  const item$ = $('#'+itemId);\r\n  const sr$ = item$.addClass('u-vh is-focusable')\r\n\t.parent();\r\n\r\n  function render(value) {\r\n\tvar showVal = ANgetNumStr(value, opt, isRplace);\t\r\n    const out = apex.util.htmlBuilder();\r\n    out.markup('<div')\r\n\t  .attr('class', 'ig-div-autonumeric '+(showVal.class?\"ig-autonumeric-custom \"+showVal.class:\"\"))\r\n\t  .attr('class', )\r\n\t  .markup('><input')\r\n      .attr('type', 'hidden')\r\n\t  .attr('class', 'ig-auto-numeric')\r\n      .attr('id', itemId+'_'+index+'_0')\r\n\t  .attr('name', itemId+'_'+index)\r\n\t  .attr('value', (isRplace?((\"\"+value).replace(\".\",\",\")):value))\r\n      .attr('tabindex', -1)\r\n      .markup(' /><label')\r\n\t  .attr('for', itemId+'_'+index+'_0')\r\n      .markup('>')\r\n      .content(showVal.val)\r\n      .markup('</label>')\r\n\t  .markup('</div>');\r\n\r\n    index += 1;\r\n\t\r\n    return out.toString();\r\n  }\r\n\r\n\t$( document ).ready(function() {\r\n\t\t//add aliment\r\n\t\tANIGsetAliment(itemId);\r\n\t});\r\n\r\n\tapex.item.create(itemId, {\r\n\t\tsetValue:function(pValue, pDisplayValue) {\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (pValue)\r\n\t\t\t\t\tel.set((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue));\r\n\t\t\t\telse\r\n\t\t\t\t\tel.set(\"\");\r\n\r\n\t\t\t\tif (pValue == \"\" && el.settings.styleRules) {\r\n\t\t\t\t\tif (el.settings.styleRules.ranges) {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules.ranges).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\tif (val == \"class\")\r\n\t\t\t\t\t\t\t\t$(\"#\"+itemId).removeClass(el.settings.styleRules.ranges[val]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\t$(\"#\"+itemId).removeClass(el.settings.styleRules[val]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tel.reformat();\t\t  \r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tapex.jQuery('#' + this.id).val((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue) );\r\n\t\t\t\tnew AutoNumeric(\"#\"+this.id, opt );\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue:function() {\r\n\t\t\tvar lVal = \"\";\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (el.get() && el.get() != \"\") {\r\n\t\t\t\t\tvar result = el.getNumber();\r\n\t\t\t\t\tlVal = (isRplace?((\"\"+result).replace(\".\",\",\")):\"\"+result);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn lVal;\t\t\r\n\t\t},\r\n\t\tdisable:function() {\r\n\t\titem$.closest('.ig-div-autonumeric').removeClass('ig-div-autonumeric-enabled');\r\n\t\titem$.closest('.ig-div-autonumeric').addClass('ig-div-autonumeric-disabled');\r\n\t\titem$.attr('readonly','readonly');\r\n\t\titem$.addClass('apex_disabled');\r\n\t\t},\r\n\t\tisDisabled: function() {\r\n\t\t\treturn item$.closest('.ig-div-autonumeric').hasClass('ig-div-autonumeric-disabled');\r\n\t\t},\t\r\n\t\tenable:function() {\r\n\t\t\titem$.closest('.ig-div-autonumeric').removeClass('ig-div-autonumeric-disabled');\r\n\t\t\titem$.closest('.ig-div-autonumeric').addClass('ig-div-autonumeric-enabled');\r\n\t\t\titem$.removeAttr('readonly');\r\n\t\t\titem$.removeClass('apex_disabled');\r\n\t\t},\r\n\t\tdisplayValueFor:function(value) {\r\n\t\treturn render(value);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction ANForminit(itemId, opt, isRplace) {\r\n\r\n\tnew AutoNumeric(\"#\"+itemId, opt);\r\n\t\r\n\tapex.widget.initPageItem(itemId, {\r\n\t\tsetValue:function(pValue, pDisplayValue) {\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (pValue)\r\n\t\t\t\t\tel.set((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue));\r\n\t\t\t\telse\r\n\t\t\t\t\tel.set(\"\");\r\n\t\r\n\t\t\t\tif (pValue == \"\" && el.settings.styleRules) {\r\n\t\t\t\t\tif (el.settings.styleRules.ranges) {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules.ranges).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\tif (val == \"class\")\r\n\t\t\t\t\t\t\t\t$(\"#\"+itemId).removeClass(el.settings.styleRules.ranges[val]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tObject.getOwnPropertyNames(el.settings.styleRules).forEach(function(val, idx, array) {\r\n\t\t\t\t\t\t\t$(\"#\"+itemId).removeClass(el.settings.styleRules[val]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tel.reformat();\t\t  \r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tapex.jQuery('#' + this.id).val((isRplace?((\"\"+pValue).replace(\",\",\".\")):pValue) );\r\n\t\t\t\tnew AutoNumeric(\"#\"+this.id, opt );\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue:function() {\r\n\t\t\tvar lVal = \"\";\r\n\t\t\tif (AutoNumeric.isManagedByAutoNumeric(\"#\"+this.id)) {\r\n\t\t\t\tvar el = AutoNumeric.getAutoNumericElement(\"#\"+this.id);\r\n\t\t\t\tif (el.get() && el.get() != \"\") {\r\n\t\t\t\t\t var result = el.getNumber();\r\n\t\t\t\t\t lVal = (isRplace?((\"\"+result).replace(\".\",\",\")):\"\"+result);\r\n\t\t\t\t }\r\n\t\t\t}\t\r\n\t\t\treturn lVal;\r\n\t\t}\r\n\t  });\r\n\t\r\n\r\n\t$(\"#\"+itemId).focusin(function(hnd) {\r\n\t\t$(this).parents(\":eq(2)\").addClass(\"is-active\");\r\n\t} );\t \r\n\r\n\t$(\"#\"+itemId).focusout(function() {\r\n\t\t$(this).parents(\":eq(2)\").removeClass(\"is-active\");\r\n\t});\t\r\n}"],"file":"ANinit.js"}